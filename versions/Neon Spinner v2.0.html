<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Neon Spinner</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #05050a;
            font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        }

        #score,
        #record {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            color: #00eaff;
            font-size: 2rem;
            text-shadow: 0 0 10px #00eaff;
            user-select: none;
            display: none;
        }

        #record {
            top: 60px;
        }

        #gameover {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            font-size: 3rem;
            display: none;
            z-index: 10;
            user-select: none;
        }

        #retry {
            margin-top: 20px;
            padding: 14px 28px;
            font-size: 1.3rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background: #00eaff;
            color: black;
            font-weight: bold;
        }

        #backmenu {
            margin-top: 10px;
            padding: 12px 24px;
            font-size: 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #ff4081;
            color: white;
            font-weight: bold;
        }

        /* --- Main Menu Neon Style & Animations --- */
        #mainmenu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            background: rgba(10, 20, 40, 0.97);
            border-radius: 30px;
            padding: 60px 70px 50px 70px;
            text-align: center;
            z-index: 20;
            min-width: 340px;
            box-shadow:
                0 0 60px #00eaff99,
                0 0 10px #00eaff55,
                0 0 0 4px #00eaff22 inset;
            color: #fff;
            display: block;
            animation: menu-pop 1s cubic-bezier(.23,1.12,.32,1) forwards;
        }

        @keyframes menu-pop {
            0% {
                opacity: 0;
                transform: translate(-50%, -60%) scale(0.8);
                filter: blur(8px);
            }
            60% {
                opacity: 1;
                transform: translate(-50%, -48%) scale(1.05);
                filter: blur(0);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
                filter: blur(0);
            }
        }

        #mainmenu h1 {
            font-size: 3.2rem;
            color: #00eaff;
            margin-bottom: 35px;
            text-shadow:
                0 0 25px #00838f,
                0 0 8px #00838f,
                0 0 2px #fff;
            letter-spacing: 2px;
            animation: neon-glow 2s infinite alternate;
        }

        @keyframes neon-glow {
            0%, 25% {
                text-shadow:
                    0 0 25px #00838f,
                    0 0 8px #00838f,
                    0 0 2px #fff;
            }
            100% {
                text-shadow:
                    0 0 40px #00eaff,
                    0 0 16px #00eaff,
                    0 0 8px #fff;
            }
        }

        #mainmenu button {
            margin: 20px 0;
            padding: 18px 48px;
            font-size: 1.5rem;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            background: linear-gradient(90deg, #00eaff 60%, #00b6c9 100%);
            color: #05050a;
            font-weight: bold;
            box-shadow:
                0 0 18px #00eaff99,
                0 0 4px #00eaff55;
            transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
            outline: none;
            position: relative;
            overflow: hidden;
            animation: button-fadein 1.2s cubic-bezier(.23,1.12,.32,1) 0.2s backwards;
        }

        @keyframes button-fadein {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        #mainmenu button:enabled:hover {
            background: linear-gradient(90deg, #00b6c9 60%, #00eaff 100%);
            transform: scale(1.07);
            box-shadow:
                0 0 30px #00eaffcc,
                0 0 8px #00eaff99;
        }

        #mainmenu button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: #222c;
            color: #aaa;
            box-shadow: none;
        }

        #mainmenu .comingsoon {
            margin-top: 12px;
            font-size: 1.15rem;
            color: #aaa;
            opacity: 0.7;
            letter-spacing: 1px;
            animation: fadein 2s 1.2s backwards;
        }

        @keyframes fadein {
            from { opacity: 0; transform: translateY(10px);}
            to { opacity: 0.7; transform: translateY(0);}
        }

        /* Neon border animation */
        #mainmenu::before {
            content: "";
            position: absolute;
            inset: -6px;
            border-radius: 36px;
            z-index: -1;
            pointer-events: none;
            /* X shape using two gradients */
            background:
                linear-gradient(45deg, #00eaff 0%, #00eaff 20%, transparent 20%, transparent 80%, #00eaff 80%, #00eaff 100%),
                linear-gradient(-45deg, #00b6c9 0%, #00b6c9 20%, transparent 20%, transparent 80%, #00b6c9 80%, #00b6c9 100%);
            filter: blur(10px) brightness(1.3);
            opacity: 0.7;
            animation: border-rotate 4s linear infinite;
        }

        @keyframes border-rotate {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
    </style>
</head>

<body>
    <div id="mainmenu">
        <h1>Neon Spinner</h1>
        <button id="playbtn">Jugar</button>
        <br>
        <button id="shopbtn" disabled>Tienda</button>
        <div class="comingsoon">(v2.0)</div>
    </div>

    <div id="score">Puntos: 0</div>
    <div id="record">RÃ©cord: 0</div>
    <div id="gameover">
        GAME OVERðŸ«¤
        <br>
        <button id="retry">Reintentar</button>
        <button id="backmenu">Volver al menÃº</button>
    </div>
    <canvas style="cursor: none;" id="game"></canvas>

    <script>
        const canvas = document.getElementById("game");
        const ctx = canvas.getContext("2d");

        canvas.width = innerWidth;
        canvas.height = innerHeight;

        let score = 0;
        let playing = false;
        let projectileSpeed = 15;

        let player = { x: canvas.width / 2, y: canvas.height / 2, r: 25, angle: 0 };
        let projectiles = [];

        // Leer rÃ©cord guardado
        let record = localStorage.getItem("neonSpinnerRecord") || 0;
        document.getElementById("record").innerText = "RÃ©cord: " + record;

        document.addEventListener("mousemove", e => {
            if (!playing) return;
            player.x = e.clientX;
            player.y = e.clientY;
        });

        function spawnProjectile() {
            if (!playing) return;

            const side = Math.floor(Math.random() * 4);
            let x, y;
            if (side === 0) { x = Math.random() * canvas.width; y = -30; }
            else if (side === 1) { x = canvas.width + 30; y = Math.random() * canvas.height; }
            else if (side === 2) { x = Math.random() * canvas.width; y = canvas.height + 30; }
            else { x = -30; y = Math.random() * canvas.height; }

            const angle = Math.atan2(player.y - y, player.x - x);

            projectiles.push({
                x, y,
                vx: Math.cos(angle) * projectileSpeed,
                vy: Math.sin(angle) * projectileSpeed,
                r: 18,
                color: `hsl(${Math.random() * 360}, 100%, 60%)`
            });

            setTimeout(spawnProjectile, 250 + Math.random() * 250);
        }

        function drawPlayer() {
            player.angle += 0.12;

            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.rotate(player.angle);

            ctx.strokeStyle = "#00eaff";
            ctx.lineWidth = 8;
            ctx.shadowBlur = 20;
            ctx.shadowColor = "#00eaff";

            ctx.beginPath();
            ctx.moveTo(-35, 0); ctx.lineTo(35, 0);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(0, -35); ctx.lineTo(0, 35);
            ctx.stroke();

            ctx.restore();
        }

        function drawProjectiles() {
            ctx.save();
            ctx.globalAlpha = 0.05;
            ctx.fillStyle = "#05050a";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.restore();

            for (let i = projectiles.length - 1; i >= 0; i--) {
                const p = projectiles[i];
                p.x += p.vx;
                p.y += p.vy;

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.shadowBlur = 20;
                ctx.shadowColor = p.color;
                ctx.fill();

                const dx = p.x - player.x;
                const dy = p.y - player.y;
                if (Math.hypot(dx, dy) < p.r + player.r) {
                    endGame();
                }

                if (p.x < -50 || p.x > canvas.width + 50 || p.y < -50 || p.y > canvas.height + 50) {
                    projectiles.splice(i, 1);
                    score++;
                    projectileSpeed += 0.05;
                    const scoreElem = document.getElementById("score");
                    scoreElem.innerText = "Puntos: " + score;

                    // Score animation
                    scoreElem.style.transition = "none";
                    scoreElem.style.transform = "scale(1.3)";
                    setTimeout(() => {
                        scoreElem.style.transition = "transform 0.2s";
                        scoreElem.style.transform = "scale(1)";
                    }, 10);

                    if (score > record) {
                        record = score;
                        const recordElem = document.getElementById("record");
                        recordElem.innerText = "RÃ©cord: " + record;
                        localStorage.setItem("neonSpinnerRecord", record);

                        // Record animation
                        recordElem.style.transition = "none";
                        recordElem.style.transform = "scale(1.3)";
                        setTimeout(() => {
                            recordElem.style.transition = "transform 0.2s";
                            recordElem.style.transform = "scale(1)";
                        }, 10);
                    }
                }
            }
        }

        function endGame() {
            playing = false;
            document.getElementById("gameover").style.display = "block";
            document.getElementById("game").style.cursor = "auto";
        }

        function update() {
            if (!playing) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawProjectiles();
            requestAnimationFrame(update);
        }

        document.getElementById("retry").onclick = () => {
            // Reiniciar el juego sin recargar la pÃ¡gina
            score = 0;
            projectileSpeed = 15;
            projectiles = [];
            player = { x: canvas.width / 2, y: canvas.height / 2, r: 25, angle: 0 };
            document.getElementById("score").innerText = "Puntos: 0";
            document.getElementById("gameover").style.display = "none";
            document.getElementById("game").style.cursor = "none";
            playing = true;
            spawnProjectile();
            update();
        };

        document.getElementById("backmenu").onclick = () => location.reload();

        document.getElementById("playbtn").onclick = () => {
            document.getElementById("mainmenu").style.display = "none";
            document.getElementById("score").style.display = "block";
            document.getElementById("record").style.display = "block";
            playing = true;
            spawnProjectile();
            update();
        };

        document.getElementById("shopbtn").onclick = () => {
            // Futuro: abrir tienda
            alert("Â¡La tienda estarÃ¡ disponible prÃ³ximamente!");
        };
    </script>

</body>

</html>